# 迭代器模式

```
定义： 
    提供一种方法顺序访问一个聚合对象中各个元素，而又不需要暴露该对象的内部表示。

迭代器模式的功能：提供对聚合对象的迭代访问。
    以不同的方式遍历聚合对象
    对同一个聚合同时进行多个遍历
    以不同的遍历策略来遍历聚合
    多态迭代：为不同的聚合结构，提供统一的迭代接口。标准迭代模式实现基本都是支持多态迭代的
        注意：多态迭代可能会带来类型安全的问题，可以考虑使用泛型。

迭代器模式的关键思想：
    把对聚合对象的遍历和访问从聚合对象中分离出来，放入到单独的迭代器中。

内部迭代器和外部迭代器：
    内部迭代器：
        迭代器自己控制迭代下一个元素的步骤，客户端无法干预，只能传操作给迭代器，
        迭代器在迭代的时候会在每个元素上执行这个操作，类似Java的回调机制。
    外部迭代器：
        由客户端来控制迭代下一个元素的步骤，客户端必须显示的调用next来迭代下一个元素。

Java最简单的统一访问聚合的方式：foreach


使用Java的迭代器：
    1、不需要自己实现Iterator接口，直接实现java.util.Iterator接口即可。
    2、Java接口实现方法不一样
    3、集合已经提供了Iterator，不需要实现类了。

带迭代策略的迭代器：
    在迭代器上实现不同的迭代策略，最典型就是实现过滤功能的迭代器。
    
谁定义遍历算法：
    常见有两个地方可以定义遍历算法：一个是聚合对象本身，一个是迭代器负责遍历算法。
    在聚合对象本身定义遍历的算法这种情况下，通常会在遍历过程中，用迭代器来存储当前迭代的状态，这种迭代器被称为游标，因为它仅用来指示当前的位置。
    在迭代器里面定义遍历算法会易于在相同的聚合上使用不同的迭代算法，同时也易于在不同的聚合上重用相同的算法。

双向迭代器：
    可以同时向前和向后遍历数据的迭代器。
    Java util包中的ListIterator接口就是一个双向迭代器。 
    
迭代器模式的优缺点：
    更好的封装性
    可以以不同的遍历方式定义一个聚合 
    迭代器简化了聚合的接口
    简化客户端调用
    同一个聚合上可以有多个遍历
    
迭代器对象的本质：控制访问聚合对象中的元素

何时选用迭代器模式：
    1、希望提供访问一个聚合对象的内容，但是又不想暴露它的内部表示的时候。
    2、希望有多种遍历方式可以访问聚合对象。
    3、希望为不同的聚合对象提供一个统一的接口。
    
翻页迭代：
    开发中常见的翻页功能有如下几种实现方式：
        1、纯数据库实现：
            依靠sql提供的功能实现翻页，用户每次请求翻页的数据，就会到数据库中获取相应的数据。
        2、纯内存实现：
            一次性从数据库中把所有数据获取出来放入内存，用户请求翻页时，从内存中获取相应的数据。
        3、纯数据库实现+纯内存实现   
            数据第一次被访问从数据库获取，然后将数据存入内存，以便后期访问。
            





```



